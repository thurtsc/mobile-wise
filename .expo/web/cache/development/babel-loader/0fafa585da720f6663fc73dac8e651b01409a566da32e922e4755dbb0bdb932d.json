{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\licia\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\Financas\\\\src\\\\pages\\\\Home\\\\index.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { AuthContext } from '../../contexts/auth';\nimport Header from '../../components/Header';\nimport { Background, ListBalance, Area, Title, List } from './styles';\nimport api from '../../services/api';\nimport { format } from 'date-fns';\nimport { useIsFocused } from '@react-navigation/native';\nimport BalanceItem from '../../components/BalanceItem';\nimport HistoricoList from '../../components/HistoricoList';\nimport CalendarModal from '../../components/CalendarModal';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  const isFocused = useIsFocused();\n  const [listBalance, setListBalance] = useState([]);\n  const [movements, setMovements] = useState([]);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [dateMovements, setDateMovements] = useState(new Date());\n  useEffect(() => {\n    let isActive = true;\n    async function getMovements() {\n      let date = new Date(dateMovements);\n      let onlyDate = date.valueOf() + date.getTimezoneOffset() * 60 * 1000;\n      let dateFormated = format(onlyDate, 'dd/MM/yyyy');\n      const receives = await api.get('/receives', {\n        params: {\n          date: dateFormated\n        }\n      });\n      const balance = await api.get('/balance', {\n        params: {\n          date: dateFormated\n        }\n      });\n      if (isActive) {\n        setMovements(receives.data);\n        setListBalance(balance.data);\n      }\n    }\n    getMovements();\n    return () => isActive = false;\n  }, [isFocused, dateMovements]);\n  async function handleDelete(id) {\n    try {\n      await api.delete('/receives/delete', {\n        params: {\n          item_id: id\n        }\n      });\n      setDateMovements(new Date());\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  function filterDateMovements(dateSelected) {\n    setDateMovements(dateSelected);\n  }\n  return _jsxDEV(Background, {\n    children: [_jsxDEV(Header, {\n      title: \"Minhas movimenta\\xE7\\xF5es\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), _jsxDEV(ListBalance, {\n      data: listBalance,\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      keyExtractor: item => item.tag,\n      renderItem: ({\n        item\n      }) => _jsxDEV(BalanceItem, {\n        data: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), _jsxDEV(Area, {\n      children: [_jsxDEV(TouchableOpacity, {\n        onPress: () => setModalVisible(true),\n        children: _jsxDEV(Icon, {\n          name: \"event\",\n          color: \"#fff\",\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), _jsxDEV(Title, {\n        style: {\n          marginBottom: 20\n        },\n        children: \"Ultimas movimenta\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), _jsxDEV(List, {\n      data: movements,\n      keyExtractor: item => item.id,\n      renderItem: ({\n        item\n      }) => _jsxDEV(HistoricoList, {\n        data: item,\n        deleteItem: handleDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 36\n      }, this),\n      showsVerticalScrollIndicator: false,\n      contentContainerStyle: {\n        paddingBottom: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), _jsxDEV(Modal, {\n      visible: modalVisible,\n      animationType: \"fade\",\n      transparent: true,\n      children: _jsxDEV(CalendarModal, {\n        setVisible: () => setModalVisible(false),\n        handleFilter: filterDateMovements\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useContext","useEffect","useState","TouchableOpacity","Modal","AuthContext","Header","Background","ListBalance","Area","Title","List","api","format","useIsFocused","BalanceItem","HistoricoList","CalendarModal","Icon","jsxDEV","_jsxDEV","Home","isFocused","listBalance","setListBalance","movements","setMovements","modalVisible","setModalVisible","dateMovements","setDateMovements","Date","isActive","getMovements","date","onlyDate","valueOf","getTimezoneOffset","dateFormated","receives","get","params","balance","data","handleDelete","id","delete","item_id","err","console","log","filterDateMovements","dateSelected","children","title","fileName","_jsxFileName","lineNumber","columnNumber","horizontal","showsHorizontalScrollIndicator","keyExtractor","item","tag","renderItem","onPress","name","color","size","style","marginBottom","deleteItem","showsVerticalScrollIndicator","contentContainerStyle","paddingBottom","visible","animationType","transparent","setVisible","handleFilter"],"sources":["C:/Users/licia/OneDrive/Área de Trabalho/Financas/src/pages/Home/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { TouchableOpacity, Modal } from 'react-native';\r\nimport { AuthContext } from '../../contexts/auth'\r\nimport Header from '../../components/Header';\r\nimport { Background, ListBalance, Area, Title, List} from './styles'; \r\nimport api from '../../services/api'\r\nimport { format } from 'date-fns';\r\nimport { useIsFocused } from '@react-navigation/native';\r\nimport BalanceItem from '../../components/BalanceItem';\r\nimport HistoricoList from '../../components/HistoricoList';\r\nimport CalendarModal from '../../components/CalendarModal'\r\nimport Icon from 'react-native-vector-icons/MaterialIcons'\r\n\r\n\r\nexport default function Home(){\r\n  const isFocused = useIsFocused();\r\n  const [listBalance, setListBalance] = useState([]);\r\n  const [movements, setMovements] = useState([]);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n\r\n  const [dateMovements, setDateMovements] = useState(new Date())\r\n\r\n\r\n  useEffect(()=>{\r\n    let isActive = true;\r\n\r\n    async function getMovements(){\r\n\r\n      let date = new Date(dateMovements)\r\n      let onlyDate = date.valueOf() + date.getTimezoneOffset() * 60 * 1000;\r\n      let dateFormated = format(onlyDate, 'dd/MM/yyyy');\r\n\r\n      const receives = await api.get('/receives', {\r\n        params:{\r\n          date: dateFormated\r\n        }\r\n      })\r\n\r\n      const balance = await api.get('/balance', {\r\n        params:{\r\n          date: dateFormated \r\n        }\r\n      })\r\n\r\n      if(isActive){\r\n        setMovements(receives.data)\r\n        setListBalance(balance.data);\r\n      }\r\n    }\r\n\r\n    getMovements();\r\n\r\n    return () => isActive = false;\r\n\r\n  }, [isFocused, dateMovements])\r\n\r\n\r\n  async function handleDelete(id){\r\n    try{\r\n      await api.delete('/receives/delete', {\r\n        params:{\r\n          item_id: id\r\n        }\r\n      })\r\n\r\n      setDateMovements(new Date())\r\n    }catch(err){\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  function filterDateMovements(dateSelected){\r\n    // console.log(dateSelected);\r\n    setDateMovements(dateSelected);\r\n  }\r\n\r\n//Titulo minhas movimentações\r\n  return(\r\n    <Background>\r\n      <Header title=\"Minhas movimentações\" />\r\n\r\n      <ListBalance\r\n        data={listBalance}\r\n        horizontal={true}\r\n        showsHorizontalScrollIndicator={false}\r\n        keyExtractor={ item => item.tag }\r\n        renderItem={ ({ item }) => ( <BalanceItem data={item} /> )}\r\n      />\r\n          \r\n      <Area> \r\n        <TouchableOpacity onPress={ () => setModalVisible(true) }>\r\n          <Icon name=\"event\" color=\"#fff\" size={30} />\r\n        </TouchableOpacity>\r\n        <Title style={{marginBottom:20,}}>Ultimas movimentações</Title>\r\n      </Area> \r\n\r\n      <List\r\n        data={movements}\r\n        keyExtractor={ item => item.id }\r\n        renderItem={ ({ item }) => <HistoricoList data={item} deleteItem={handleDelete} />  }\r\n        showsVerticalScrollIndicator={false}\r\n        contentContainerStyle={{ paddingBottom: 20 }}\r\n      />\r\n\r\n      <Modal visible={modalVisible} animationType=\"fade\" transparent={true}>\r\n        <CalendarModal\r\n          setVisible={ () => setModalVisible(false) }\r\n          handleFilter={filterDateMovements}\r\n        />\r\n      </Modal>\r\n\r\n\r\n    </Background>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}